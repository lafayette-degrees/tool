<!DOCTYPE html>
<html>
<head>    
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="/editorstyle.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <link rel="icon" type="image/x-icon" href="/medaa/icon.png">
    <title>Photo Editor</title>
    <style>
        body{
            background-image: url('/gifs/IMG_0414-ezgif.com-optimize.gif');
        }
    </style>
</head>
<body>
    <!--HEADER-->
    <header>
        <p><br></p>
    </header>
    <a href="index.html">
        <img class="titleImage" src="/art/laufeytitle.png"></a>

    <!--HEAD BAR-->
    <div class="page-container" style="width: fit-content;"> <!--THIS SETS UP THE CONTAINER, NO ADDITIONAL CONTAINERS ARE REQUIRED-->
        <p class="subtitle" style="margin-right: 20px;"><a href="/index.html" class="mainlink">home</a></p>
        <p class="subtitle" style="margin-right: 20px;"><a href="/projects.html" class="mainlink">projects</a></p>
        <p class="subtitle" style="margin-right: 20px;"><a href="/aboutme.html" class="mainlink">about me</a></p>
        <p class="subtitle"><a href="https://www.instagram.com/lafayette.degrees/" class="mainlink">instagram</a></p> 
    </div>

    <!--WELCOME TEXT-->
    <div class="box" style="text-align: left; width: fit-content;">
        
        <p class="paragraph" style="text-align: center;">Edit your photos here!
        </p>

        <!-- Upload section -->
        <div class="upload-section">
            <input type="file" id="imageUpload" accept="image/*">
            <p>Select an image to edit</p>
        </div>
        
        <!-- Canvas for image display -->
        <canvas id="imageCanvas"></canvas>
        
        <!-- Controls section -->
        <div class="controls">
            <!-- We'll add sliders here -->
        </div>
        
        <!-- Download button -->
        <button id="downloadButton">Download Edited Image</button>

        <script>
            //Get references to our elements
            const imageUpload = document.getElementById('imageUpload');
            const canvas = document.getElementById('imageCanvas');
            const context = canvas.getContext('2d');
            const downloadButton = document.getElementById('downloadButton');

            //variable to store the original image data
            let originalImage = null;

            //handle image selection
            imageUpload.addEventListener('change', function(e) {
                //get image, return if none
                const file = e.target.files[0];
                if(!file) return;

                //create a filereader to read the image file
                const reader = new FileReader();
                
                reader.onload = function(event) {
                    //create an image element
                    const img = new Image();
                    
                    img.onload = function() {
                        //set canvas dimesions to fit image
                        canvas.width = img.width;
                        canvas.height = img.height;

                        //draw image
                        context.drawImage(img, 0, 0);

                        //store origignal image data
                        originalImage = context.getImageData(0,0, canvas.width, canvas.height);

                        //show the canvas
                        canvas.style.display = 'block';

                        //enable download
                        downloadButton.disabled = false;
                    };

                    //set the image source to the file data
                    img.src = event.target.result;
                };

                //read the file as a data urk
                reader.readAsDataURL(file);
            });

        </script>
    </div>
</body>
</html>